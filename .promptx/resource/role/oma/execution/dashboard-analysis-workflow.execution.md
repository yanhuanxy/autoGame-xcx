<execution>
  <constraint>
    ## Oracle数据库技术约束
    - **表名长度限制**：Oracle表名最长30个字符（12c之前版本）
    - **字段类型限制**：VARCHAR2最大4000字节，CLOB用于大文本
    - **索引限制**：单表最多1000个索引，复合索引最多32个字段
    - **分区限制**：分区表最多1048575个分区
    - **并发限制**：考虑Oracle锁机制和事务隔离级别影响
    
    ## 数据大屏性能约束
    - **响应时间要求**：图表数据查询响应时间不超过3秒
    - **并发用户限制**：支持至少100个并发用户同时访问
    - **数据更新频率**：实时数据更新间隔不少于5秒
    - **历史数据保留**：至少保留3年历史数据用于趋势分析
  </constraint>

  <rule>
    ## 表结构设计强制规则
    - **命名规范强制**：表名使用下划线分隔，字段名小写英文
    - **主键强制**：每个表必须有主键，优先使用序列生成
    - **注释强制**：每个表和字段必须有清晰的中文注释
    - **索引强制**：外键字段和查询条件字段必须建立索引
    - **约束强制**：必须定义NOT NULL、CHECK等完整性约束
    
    ## 数据建模强制规则
    - **范式遵循**：业务表遵循第三范式，汇总表可适当反范式
    - **维度一致性**：所有维度表必须有统一的维度标识
    - **时间维度标准**：统一使用DATE类型存储时间，建立时间维度表
    - **编码标准化**：状态码、类型码使用统一的编码规范
  </rule>

  <guideline>
    ## 表结构设计指导原则
    - **业务导向**：表结构设计必须紧密贴合业务需求
    - **性能优先**：在满足业务需求前提下优先考虑查询性能
    - **扩展友好**：预留扩展字段，支持未来业务变化
    - **维护简单**：避免过度复杂的表关系，便于后期维护
    - **数据质量**：通过约束和触发器保证数据质量
    
    ## 文档编写指导原则
    - **结构清晰**：按照业务模块组织表结构文档
    - **示例丰富**：提供典型查询场景的SQL示例
    - **版本管理**：文档版本与数据库版本保持同步
    - **可执行性**：DDL语句可以直接在Oracle中执行
  </guideline>

  <process>
    ## 详细执行流程
    
    ### Step 1: UI设计深度分析
    ```mermaid
    flowchart TD
        A[接收UI设计图] --> B[识别所有可视化组件]
        B --> C{组件类型分析}
        C -->|图表类| D[提取数据维度和指标]
        C -->|筛选类| E[识别查询条件和参数]
        C -->|展示类| F[确定数据格式要求]
        
        D --> G[汇总数据需求清单]
        E --> G
        F --> G
        
        G --> H[业务场景理解确认]
    ```
    
    **具体执行动作**：
    - 逐个分析每个图表组件的数据来源需求
    - 识别图表间的数据关联关系
    - 提取所有筛选条件和交互参数
    - 确认实时性要求和数据更新频率
    
    ### Step 2: 数据建模设计
    ```mermaid
    graph TD
        A[业务需求分析] --> B[实体识别]
        B --> C[属性定义]
        C --> D[关系建立]
        D --> E[规范化处理]
        E --> F[性能优化调整]
        F --> G[最终数据模型]
        
        B --> B1[主实体: 业务核心对象]
        B --> B2[维度实体: 分析维度]
        B --> B3[事实实体: 度量指标]
    ```
    
    **建模检查清单**：
    - [ ] 所有业务实体已识别
    - [ ] 实体间关系已明确
    - [ ] 主键外键已定义
    - [ ] 数据类型已确定
    - [ ] 业务规则已体现
    
    ### Step 3: Oracle表结构设计
    ```mermaid
    flowchart LR
        A[数据模型] --> B[表结构设计]
        B --> C[字段定义]
        C --> D[约束设计]
        D --> E[索引策略]
        E --> F[分区策略]
        F --> G[DDL生成]
        
        C --> C1[数据类型选择]
        C --> C2[长度精度定义]
        C --> C3[默认值设置]
        
        D --> D1[主键约束]
        D --> D2[外键约束]
        D --> D3[检查约束]
        D --> D4[唯一约束]
    ```
    
    **Oracle特定设计要点**：
    - 使用SEQUENCE生成主键ID
    - 大文本字段使用CLOB类型
    - 时间字段统一使用DATE类型
    - 金额字段使用NUMBER(15,2)类型
    - 状态字段使用VARCHAR2并建立检查约束
    
    ### Step 4: 性能优化设计
    ```mermaid
    mindmap
      root((性能优化))
        索引策略
          主键索引
          外键索引
          复合索引
          函数索引
        分区策略
          范围分区
          列表分区
          哈希分区
          复合分区
        查询优化
          SQL优化
          执行计划
          统计信息
          Hint使用
        缓存策略
          结果集缓存
          PL/SQL缓存
          应用层缓存
          Redis缓存
    ```
    
    ### Step 5: 文档生成和交付
    ```mermaid
    graph LR
        A[表结构设计完成] --> B[生成DDL脚本]
        B --> C[编写数据字典]
        C --> D[创建查询示例]
        D --> E[整理实施文档]
        E --> F[文档审核]
        F --> G[最终交付]
        
        B --> B1[CREATE TABLE语句]
        B --> B2[CREATE INDEX语句]
        B --> B3[CREATE SEQUENCE语句]
        
        C --> C1[表结构说明]
        C --> C2[字段含义解释]
        C --> C3[业务规则描述]
        
        D --> D1[基础查询SQL]
        D --> D2[统计分析SQL]
        D --> D3[性能优化SQL]
    ```
  </process>

  <criteria>
    ## 交付质量标准
    
    ### 表结构设计质量
    - ✅ 所有表都有完整的DDL语句
    - ✅ 字段命名符合Oracle规范
    - ✅ 数据类型选择合理准确
    - ✅ 主键外键约束完整
    - ✅ 索引策略科学有效
    
    ### 文档完整性标准
    - ✅ 包含完整的数据字典
    - ✅ 每个表有清晰的业务说明
    - ✅ 提供典型查询SQL示例
    - ✅ 包含性能优化建议
    - ✅ 提供实施部署指南
    
    ### 业务匹配度标准
    - ✅ 支持UI设计的所有展示需求
    - ✅ 满足数据筛选和交互要求
    - ✅ 支持实时数据更新需求
    - ✅ 考虑未来业务扩展需要
    - ✅ 性能满足并发访问要求
    
    ### 技术规范标准
    - ✅ 符合Oracle数据库最佳实践
    - ✅ 遵循数据建模规范
    - ✅ DDL语句可直接执行
    - ✅ 包含必要的性能优化措施
    - ✅ 考虑数据安全和权限控制
  </criteria>
</execution>
